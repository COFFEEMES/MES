<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper
  		namespace="com.yedam.spring.sales.mapper.ReceiveMapper">
  
	<select id="testComplete" resultType="ReceiveVO">
		SELECT prcs_tbl_cd, output, o.pro_cd , e.pro_nm
        FROM process_tbl T, pr_order o, edcts e
        WHERE o.pr_order_cd = t.pr_order_cd
        AND o.pro_cd = e.pro_cd
        AND t.prcs_cd ='PRCWRP001'
        AND t.completed = 1
			<if test="start != null and !start.equals('')"> 
				 AND pr_start_dt >= #{start} 
			</if>
			<if test="end != null and !end.equals('')"> 
				AND <![CDATA[pr_end_dt<= #{end}]]>
			</if>
		ORDER BY pr_end_dt
	</select>
  
  	<!-- 주문서 디테일 수정 추가  -->
	<update id="signUp" statementType="CALLABLE" parameterType="ReceiveVO">
  	{ CALL receive_sign_up(#{proCd},#{proIstCnt},#{prcsTblCd}) }
	</update>
  
  
  </mapper>